{
  "openapi": "3.0.3",
  "info": {
    "title": "Internet Human API",
    "description": "API for accessing structured essays and thoughts from internethuman.neocities.org. Includes long-form essays broken down into themes and relationships, plus short-form thoughts with tags.",
    "version": "1.1.0",
    "contact": {
      "name": "tomismeta",
      "url": "https://x.com/tomismeta"
    }
  },
  "servers": [
    {
      "url": "https://internethuman.vercel.app",
      "description": "Production"
    }
  ],
  "paths": {
    "/api/essays": {
      "get": {
        "summary": "List all essays",
        "operationId": "listEssays",
        "tags": ["Essays"],
        "responses": {
          "200": {
            "description": "List of available essays",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "essays": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "string", "example": "new-art" },
                          "href": { "type": "string", "example": "/api/essays/new-art" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/essays/{id}": {
      "get": {
        "summary": "Get a single essay",
        "operationId": "getEssay",
        "tags": ["Essays"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "example": "new-art"
          }
        ],
        "responses": {
          "200": {
            "description": "Full essay data",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Essay" }
              }
            }
          },
          "404": {
            "description": "Essay not found"
          }
        }
      }
    },
    "/api/themes/{essayId}": {
      "get": {
        "summary": "Get themes and relationships for an essay",
        "operationId": "getThemes",
        "tags": ["Themes"],
        "parameters": [
          {
            "name": "essayId",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "example": "new-art"
          }
        ],
        "responses": {
          "200": {
            "description": "Themes with relationships",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "essay_id": { "type": "string" },
                    "themes": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/ThemeSummary" }
                    },
                    "relationships": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/ThemeRelationship" }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Essay not found"
          }
        }
      }
    },
    "/api/themes/{essayId}/{themeId}": {
      "get": {
        "summary": "Get a specific theme by ID",
        "operationId": "getThemeById",
        "tags": ["Themes"],
        "parameters": [
          {
            "name": "essayId",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "example": "new-art"
          },
          {
            "name": "themeId",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "example": "hindsight-recognition"
          }
        ],
        "responses": {
          "200": {
            "description": "Theme with its relationships",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "essay_id": { "type": "string" },
                    "theme": { "$ref": "#/components/schemas/Theme" },
                    "relationships": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/ThemeRelationship" }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Theme not found"
          }
        }
      }
    },
    "/api/thoughts": {
      "get": {
        "summary": "List all thoughts",
        "operationId": "listThoughts",
        "tags": ["Thoughts"],
        "responses": {
          "200": {
            "description": "List of all thoughts with tags",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "collection": { "type": "string" },
                    "description": { "type": "string" },
                    "author": { "$ref": "#/components/schemas/AuthorInfo" },
                    "epigraphs": { "type": "array", "items": { "type": "string" } },
                    "count": { "type": "integer" },
                    "thoughts": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/ThoughtSummary" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/thoughts/{id}": {
      "get": {
        "summary": "Get a single thought",
        "operationId": "getThought",
        "tags": ["Thoughts"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "example": "hyper-abstractionism"
          }
        ],
        "responses": {
          "200": {
            "description": "Full thought data",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Thought" }
              }
            }
          },
          "404": {
            "description": "Thought not found"
          }
        }
      }
    },
    "/api/thoughts/tags/{tag}": {
      "get": {
        "summary": "Get thoughts by tag",
        "operationId": "getThoughtsByTag",
        "tags": ["Thoughts"],
        "parameters": [
          {
            "name": "tag",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "example": "hyperstition"
          }
        ],
        "responses": {
          "200": {
            "description": "Thoughts matching the tag",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "tag": { "type": "string" },
                    "count": { "type": "integer" },
                    "thoughts": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Thought" }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No thoughts with this tag",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": { "type": "string" },
                    "available_tags": { "type": "array", "items": { "type": "string" } }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/authors": {
      "get": {
        "summary": "List all authors",
        "operationId": "listAuthors",
        "tags": ["Authors"],
        "responses": {
          "200": {
            "description": "List of authors",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "authors": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/AuthorSummary" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/authors/{handle}": {
      "get": {
        "summary": "Get author by handle/name with all their quotes",
        "operationId": "getAuthor",
        "tags": ["Authors"],
        "parameters": [
          {
            "name": "handle",
            "in": "path",
            "required": true,
            "schema": { "type": "string" },
            "example": "tomismeta"
          }
        ],
        "responses": {
          "200": {
            "description": "Author with essays and quotes",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AuthorDetail" }
              }
            }
          },
          "404": {
            "description": "Author not found"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Essay": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "title": { "type": "string" },
          "subtitle": { "type": "string" },
          "authors": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/AuthorInfo" }
          },
          "prompt": {
            "type": "object",
            "properties": {
              "source": { "type": "string" },
              "url": { "type": "string" },
              "context": { "type": "string" }
            }
          },
          "themes": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/Theme" }
          },
          "theme_relationships": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/ThemeRelationship" }
          },
          "case_studies": { "type": "array" },
          "open_threads": { "type": "array", "items": { "type": "string" } },
          "meta": { "type": "object" }
        }
      },
      "Theme": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "thesis": { "type": "string" },
          "evidence": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "speaker": { "type": "string" },
                "quote": { "type": "string" }
              }
            }
          },
          "questions": { "type": "array", "items": { "type": "string" } },
          "relates_to": { "type": "array", "items": { "type": "string" } }
        }
      },
      "ThemeSummary": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "thesis": { "type": "string" },
          "relates_to": { "type": "array", "items": { "type": "string" } }
        }
      },
      "ThemeRelationship": {
        "type": "object",
        "properties": {
          "from": { "type": "string" },
          "to": { "type": "string" },
          "relationship": {
            "type": "string",
            "enum": ["causation", "enablement", "implication", "tension", "trade-off", "convergence", "mechanism", "feedback-loop", "precursor"]
          },
          "description": { "type": "string" }
        }
      },
      "Thought": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "title": { "type": "string" },
          "text": { "type": "string" },
          "tweet_url": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } },
          "author": { "$ref": "#/components/schemas/AuthorInfo" }
        }
      },
      "ThoughtSummary": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "title": { "type": "string" },
          "href": { "type": "string" },
          "tags": { "type": "array", "items": { "type": "string" } }
        }
      },
      "AuthorInfo": {
        "type": "object",
        "properties": {
          "handle": { "type": "string" },
          "name": { "type": "string" },
          "url": { "type": "string" }
        }
      },
      "AuthorSummary": {
        "type": "object",
        "properties": {
          "handle": { "type": "string" },
          "name": { "type": "string" },
          "url": { "type": "string" },
          "essays": { "type": "array", "items": { "type": "string" } },
          "href": { "type": "string" }
        }
      },
      "AuthorDetail": {
        "type": "object",
        "properties": {
          "author": { "$ref": "#/components/schemas/AuthorInfo" },
          "essays": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "title": { "type": "string" },
                "href": { "type": "string" }
              }
            }
          },
          "quotes": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "essay_id": { "type": "string" },
                "theme_id": { "type": "string" },
                "theme_name": { "type": "string" },
                "quote": { "type": "string" }
              }
            }
          },
          "quote_count": { "type": "integer" }
        }
      }
    }
  }
}
